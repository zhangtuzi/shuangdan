<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport"   id='viewport' content="width=device-width,initial-scale=1, user-scalable=no, minimum-scale=1, maximum-scale=1" >
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>金锤一响 免单大奖</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/zajindan.css">
    <script type="text/javascript" src="js/public640.js"></script>
  </head>
  <body class="warpBody">
    <!-- 页面主体部分开始 -->
    <div class="warpBody">
      <div class="goldDiv">
        <img src="images/goldIcon.png" class="goldIcon fl">
        <span class="fl goldNum">193</span>
      </div>
      <div class="hdgzBtn">
          <div class="marginT5">活动规则</div>
          <img src="images/jiantou_xia.png" class="xiaIcon fl">
      </div>
      <img src="images/titPic.png" class="titPic">
      <p class="zadanTip">选个彩蛋砸开吧~</p>
      <!-- 彩蛋区开始 -->
      <div class="caidanWarpDiv">
          <img src="images/chuizi.png" class="chuiziIcon chuiziStart jump">
          <img src="images/caidanLeft0.png" class="caidanL0 caidanL caidanMove">
          <img src="images/caidanRight0.png" class="caidanR0 caidanR caidanMove">
          <img src="images/caidanCenter0.png" class="caidanC0 caidanC caidanMove">
          <img src="images/stageIcon.png" class="stageIcon">
      </div>
      <!-- 彩蛋区结束 -->
      <div class="zadanjihuiDiv">
        <p>今日您还有<span class="dadanNum">3</span>次砸蛋机会</p>
        <p>可使用10金币兑换1次砸蛋机会<span class="duihuanBtn">兑换></span></p>
      </div>
      <!-- 中奖公示区开始 -->
      <div class="zhongjiangbobaoWarp">
        <div class="zhongjiangbobaoDiv fl">
          <header>
            <div class="fgx"></div>
            <div class="bobaoTit">中奖公示</div>
          </header>
          <div class="miandan">
            <span class="zhongjiangPhone fl">185 *** 0866</span>
            <span class="zhongjiangjiangpin fr">获得 免单大奖</span>
          </div>
          <div class="zhongjiangbobaoBanner">
            <ul class="zhongjiangUl">
              <li>
                <span class="zhongjiangPhone fl">185 *** 0866</span>
                <span class="zhongjiangjiangpin fr">获得 haha</span>
              </li>
              <li>
                <span class="zhongjiangPhone fl">185 *** 0866</span>
                <span class="zhongjiangjiangpin fr">获得 1234</span>
              </li>
              <li>
                <span class="zhongjiangPhone fl">185 *** 0866</span>
                <span class="zhongjiangjiangpin fr">获得 gakglj</span>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <!-- 中奖公示区结束 -->
      <div class="shareBtn">分享得流量</div>
      <div class="BottmBtnDiv">
        <div class="myGift fl BottomBtn">我的奖品</div>
        <div class="myCount fr BottomBtn">我的账户</div>
      </div>
    </div>
    <!-- 页面主体部分结束 -->
    <div class="mc"></div>
    <div class="hdgzMc"></div>
    <!-- 活动规则弹层 -->
    <div class="hdgzTc">
      <img src="images/hdgzBg.png" class="hdgzBg">
      <img src="images/closebtn1.png" class="hdgzClose">
      <div class="hdgzHeader">活动规则</div>
      <div class="hdgzContent">
        <div class="hdgzHideDiv">
          <ul class="hdgzUl">
            <li>
              <span>•</span>
              <span class="hdgzSpan">
                每人每天1次免费抽奖机会，免费机会用完,可用金币兑换抽奖机会，10金币可兑换一次抽奖机会。
              </span>
            </li>
            <li>
              <span>•</span>
              <span class="hdgzSpan">
                每人每天1次免费抽奖机会，免费机会用完,可用金币兑换抽奖机会，10金币可兑换一次抽奖机会。
              </span>
            </li>
            <li>
              <span>•</span>
              <span class="hdgzSpan">
                每人每天1次免费抽奖机会，免费机会用完,可用金币兑换抽奖机会，10金币可兑换一次抽奖机会。
              </span>
            </li>
            <li>
              <span>•</span>
              <span class="hdgzSpan">
                每人每天1次免费抽奖机会，免费机会用完,可用金币兑换抽奖机会，10金币可兑换一次抽奖机会。
              </span>
            </li>
            <li>
              <span>•</span>
              <span class="hdgzSpan">
                每人每天1次免费抽奖机会，免费机会用完,可用金币兑换抽奖机会，10金币可兑换一次抽奖机会。
              </span>
            </li>
            <li>
              <span>•</span>
              <span class="hdgzSpan">
                每人每天1次免费抽奖机会，免费机会用完,可用金币兑换抽奖机会，10金币可兑换一次抽奖机会。
              </span>
            </li>
            <li>
              <span>•</span>
              <span class="hdgzSpan">
                每人每天1次免费抽奖机会，免费机会用完,可用金币兑换抽奖机会，10金币可兑换一次抽奖机会。
              </span>
            </li>
            <li>
              <span>•</span>
              <span class="hdgzSpan">
                每人每天1次免费抽奖机会，免费机会用完,可用金币兑换抽奖机会，10金币可兑换一次抽奖机会。
              </span>
            </li>
            <li>
              <span>•</span>
              <span class="hdgzSpan">
                每人每天1次免费抽奖机会，免费机会用完,可用金币兑换抽奖机会，10金币可兑换一次抽奖机会。
              </span>
            </li>
          </ul>
        </div>

      </div>
    </div>

    <!-- 无抽奖机会弹层 -->
    <div class="noJihuiDiv">
      <img src="images/closebtn1.png" class="tcCloseBtn noJihuiTcClose">
      <img src="images/tcLogo.png" class="tcLogo">
      <div class="tcContent">
        <p class="tcTips1">您的抽奖机会已用完！</p>
        <p class="tcTip2 color666">是否确认使用10金币兑换一次砸奖机会？</p>
        <div class="tcKnoweBtn marginT38">
          <div class="noJihuiCancel fl">取消</div>
          <div class="goDuihuan fl">确认兑换</div>
        </div>
      </div>
    </div>

    <!-- 直接兑换抽奖机会 -->
    <div class="duihuanJihuiDiv">
      <img src="images/closebtn1.png" class="tcCloseBtn duihuanTcClose">
      <img src="images/tcLogo.png" class="tcLogo">
      <div class="tcContent">
        <p class="tcTips1">兑换1次砸奖机会，将使用您10金币。</p>
        <p class="tcTip2 color666">确认继续？</p>
        <div class="tcKnoweBtn marginT38">
          <div class="cuihuanCancel fl">取消</div>
          <div class="DuihuanConfirm1 fl">确认</div>
        </div>
      </div>
    </div>

    <!-- 兑换抽奖机会结果弹层（金币不足） -->
    <div class="duihuanJihuiResultDiv">
      <img src="images/closebtn1.png" class="tcCloseBtn duihuanResultTcClose">
      <img src="images/tcLogo.png" class="tcLogo">
      <div class="tcContent">
        <p class="tcTips1">哎呦，您的金币余额不足。</p>
        <p class="tcTip2 color666">连续签到，可获得金币。</p>
        <div class="tcKnoweBtn marginT38">
          <div class="duihuanResultCancel fl">取消</div>
          <a href="###">
            <div class="DuihuanResultConfirm1 fl">去签到</div>
          </a>
        </div>
      </div>
    </div>

    <!-- 兑换失败弹层 -->
    <div class="duihuanFailDiv">
        <img src="images/closebtn1.png" class="tcCloseBtn duihuanFailClose">
        <img src="images/tcLogo.png" class="tcLogo">
        <p class="tcTips1">哎呦，兑换失败，请稍后重试。</p>
        <div class="duihuanFailKnowe tcKnoweBtn marginT40">我知道了</div>
    </div>


    <!-- 中奖弹层 -->
    <div class="JingpinTc">
      <img src="images/closebtn1.png" class="jingpinTcClose">
        <img src="images/guang.png" class="guangIcon">
        <img src="images/HuafeiJiangpinPic.png" class="jiangpinPic">
        <div class="JiangpinTxt">
          <p class="zhongjiangTit1">恭喜您砸中<span class="jingpinName">5元话费红包</span></p>
          <p class="zhongjiangTit2">
            可到<a href="###" class="warplink">我的奖品</a>中查看奖品
          </p>
        </div>
        <!-- 奖品切换按钮，不需要同步 -->
        <p _jiangpinIndex="0" class="jiangpinTcChange" style="display:inline-block;padding:0.2rem;border:1px solid #ff7744;
        margin-top:0.3rem;color:#ff7744;font-size:0.3rem;">下个奖品弹层</p>
        <!-- 奖品切换按钮，不需要同步 -->
    </div>
    <script type="text/javascript" src="js/jquery-1.11.3.min.js"></script>
    <script type="text/javascript">
      // 奖品列表数组
      var zhongjiangArray=[
        {
          'picUrl':'images/HuafeiJiangpinPic.png',
          'name':'5元话费红包',
          'desc':'可到<a href="###" class="warplink">我的奖品</a>中查看奖品'
        },
        {
          'picUrl':'images/LiuliangJiangpinPic.png',
          'name':'10MB流量',
          'desc':'奖品已存入您的<a href="###" class="warplink">流量账户</a>，</br>满100MB可兑换1个100MB流量包'
        },
        {
          'picUrl':'images/YuyinJiangpinPic.png',
          'name':'2分钟语音',
          'desc':'奖品已存入您的<a href="###" class="warplink">语音账户</a>，</br>满50语音可兑换1个50分钟语音包'
        },
        {
          'picUrl':'images/JinbiJiangpinPic.png',
          'name':'2金币幸运奖',
          'desc':'将于24小时内，存入您的金币账户。'
        },
        {
          'picUrl':'images/miandanJiangpinPic.png',
          'name':'免单大奖',
          'desc':'您上个月账单为110.50元，</br>联通将于活动结束后存入您的话费账户,</br>同时，可到<a href="###" class="warplink">我的奖品</a>中查看奖品'
        }
      ];
      //奖品切换按钮
      $('.jiangpinTcChange').click(function(){
        var this_jiangpinIndex=parseInt($(this).attr('_jiangpinIndex'));
        this_jiangpinIndex++;
        if(this_jiangpinIndex>zhongjiangArray.length-1){
          this_jiangpinIndex=0;
        }
        $(this).attr('_jiangpinIndex',this_jiangpinIndex);
        var currentJingpin=zhongjiangArray[this_jiangpinIndex];
        $('.jingpinName').html(currentJingpin.name);
        $('.zhongjiangTit2').html(currentJingpin.desc);
        $('.jiangpinPic').attr('src',currentJingpin.picUrl);
    })

      var chuiziJump=setInterval(chuiziJumpFun,700);
      $('.caidanL').click(function(){
          if(isChoujiang()){
            jump = false;
            $('.chuiziIcon').removeClass('jump')
            zadanFun($(this),'-0.1rem','3.5rem','20',150);
          }
      })
      $('.caidanC').click(function(){
          if(isChoujiang()){
            jump = false;
            $('.chuiziIcon').removeClass('jump')
            zadanFun($(this),'-0.5rem','1.5rem','20',100);
          }
      })
      $('.caidanR').click(function(){
          if(isChoujiang()){
            jump = false;
            $('.chuiziIcon').removeClass('jump')
            zadanFun($(this),'-0.05rem','-0.25rem','50',40);
          }
      })
      //直接兑换抽奖机会弹层出现
      $('.duihuanBtn').click(function(){
        JinzMove();
        $('.mc,.duihuanJihuiDiv').show();
      })
      //直接兑换抽奖机会弹层关闭
      $('.duihuanTcClose,.cuihuanCancel').click(function(){
        $('.mc,.duihuanJihuiDiv').hide();
        $("body").unbind("touchmove");
      })
      //确认兑换抽奖机会，兑换抽奖机会结果弹层
      $('.goDuihuan').click(function(){
        isZadanFlag=true;//点击彩蛋，砸蛋可以进行了
        JinzMove();
        $('.mc,.noJihuiDiv').hide();
        $('.mc,.duihuanJihuiResultDiv').show();
      })

      // 关闭兑换抽奖机会结果弹层
      $('.duihuanResultCancel,.duihuanResultTcClose').click(function(){
        $('.mc,.duihuanJihuiResultDiv').hide();
        $("body").unbind("touchmove");
      })
      //关闭兑换失败弹层
      $('.duihuanFailClose,.duihuanFailKnowe').click(function(){
        $('.mc,.duihuanFailDiv').hide();
        $("body").unbind("touchmove");
      })

      //活动规则显示隐藏
      $('.hdgzBtn').click(function(){
        var win_H=$(window).height();
        $('.warpBody').css({'height':win_H,'overflow':'hidden'});
        $('.hdgzMc,.hdgzTc').show();
      })
      $('.hdgzClose').click(function(){
        $('.hdgzMc,.hdgzTc').hide();
        $('.warpBody').css({'height':'auto','overflow':'auto'});
      })

      // 抽奖机会是否还有
      var isZadanFlag=true;//是否可以砸蛋
      function isChoujiang(){
        var jihui=parseInt($('.dadanNum').text());
        if(isZadanFlag){
          isZadanFlag=false;
          if(jihui>0){

            jihui--;
            $('.dadanNum').text(jihui);
            return true;
          }else{
            JinzMove();
            $('.mc,.noJihuiDiv').show();
            return false;
          }
        }

      }

      //无抽奖机会弹层关闭
      $('.noJihuiTcClose,.noJihuiCancel').click(function(){
        isZadanFlag=true;//点击彩蛋，砸蛋可以进行了
        $('.mc,.noJihuiDiv').hide();
        $("body").unbind("touchmove");
      })
      //奖品弹层关闭
      $('.jingpinTcClose').click(function(){
        isZadanFlag=true;//点击彩蛋，砸蛋可以进行了
        $("body").unbind("touchmove");
        $('.mc,.JingpinTc').hide();
        $('.caidanC').attr('src','images/caidanCenter0.png');
        $('.caidanL').attr('src','images/caidanLeft0.png');
        $('.caidanR').attr('src','images/caidanRight0.png');
      })
      //锤子跳动
      var jump = true;
      function chuiziJumpFun(){
        if(jump){
            jump = false;
            $('.chuiziIcon').removeClass('jump');
        }else{
          jump = true;
          $('.chuiziIcon').addClass('jump');
        }
      }
      // 锤子移动砸蛋
      function zadanFun(dom,top,right,chuiIndex,moveTime){
        clearInterval(chuiziJump);
        //锤子移动
        $('.chuiziIcon').animate({
          'top':top,
          'right':right,
          'z-index':chuiIndex
        },moveTime,function(){
          //锤子砸蛋
          chuiziJump=setInterval(chuiziJumpFun,200);
          caidanM(dom);
            setTimeout(function(){
              $('.chuiziIcon').removeClass('jump').removeAttr('style').addClass('chuiziStart');
              clearInterval(chuiziJump);
              //锤子复原
              chuiziJump=setInterval(chuiziJumpFun,700);
              setTimeout(function(){
                $('.mc,.JingpinTc').show();
                JinzMove();
              },400)
            },1000)
        });
      }

      //彩蛋晃动
      function caidanM(caidan){
        var caidanMi=0;
        var caidanMove=setInterval(function(){
          switch (caidanMi) {
            case 0:
              caidan.css('transform','rotate(-0)');
              break;
            case 11:
              if(caidan.hasClass('caidanC')){
                caidan.attr('src','images/caidanCenter1.png').css('transform','rotate(-10deg)');
              }else if(caidan.hasClass('caidanL')){
                caidan.attr('src','images/caidanLeft1.png').css('transform','rotate(-10deg)');
              }else{
                caidan.attr('src','images/caidanRight1.png').css('transform','rotate(-10deg)');
              }
              break;
            case 15:
              caidan.css('transform','rotate(-0)');
              break;
            case 20:
              if(caidan.hasClass('caidanC')){
                caidan.attr('src','images/caidanCenter2.png').css('transform','rotate(-10deg)');
              }else if(caidan.hasClass('caidanL')){
                caidan.attr('src','images/caidanLeft2.png').css('transform','rotate(-10deg)');
              }else{
                caidan.attr('src','images/caidanRight2.png').css('transform','rotate(-10deg)');
              }
              break;
            case 30:
                clearInterval(caidanMove);
              break;
            default:
              caidan.css('transform','rotate(-0)');
          }
          caidanMi++;
        },50)

      }

      //禁止页面滚动
      function JinzMove(){
        $("body").bind("touchmove",function(e){
          e.preventDefault();
        });
      }

      //中奖公示部分滚动
      var zhongjiangShowI=0;
      var zhongjiangUlH=$('.zhongjiangbobaoBanner').height();
      $('.zhongjiangUl').append($('.zhongjiangUl').html());
      setInterval(function(){
        var zhongjiangUlTop=$('.zhongjiangUl').css('margin-top');
        zhongjiangUlTop=parseInt(zhongjiangUlTop.substring(0,zhongjiangUlTop.length-2));
        if(zhongjiangUlTop+zhongjiangUlH>0){
          zhongjiangUlTop-=1;
        }else{
          zhongjiangUlTop=0;
        }
        $('.zhongjiangUl').css('margin-top',zhongjiangUlTop);
      },20)
    </script>
  </body>
</html>
